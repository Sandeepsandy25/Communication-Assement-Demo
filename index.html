<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cognizant Communication Mock — Fully Auto-Evaluated</title>
<style>
body{font-family:system-ui,Arial;max-width:900px;margin:20px auto;padding:20px;color:#111}
header{display:flex;align-items:center;gap:12px}
h1{margin:0;font-size:20px}
section{border:1px solid #ddd;padding:14px;border-radius:8px;margin-top:16px}
.row{display:flex;gap:12px;flex-wrap:wrap}
button{padding:8px 12px;border-radius:6px;border:0;background:#1e88e5;color:white;cursor:pointer}
.small{font-size:13px;color:#555}
.mcq{margin-top:10px}
.controls{display:flex;gap:8px;align-items:center}
.correct{color:green;font-weight:bold;margin-left:10px}
.wrong{color:red;font-weight:bold;margin-left:10px}
</style>
</head>
<body>
<header>
<h1>Cognizant Communication — Fully Auto-Evaluated Mock</h1>
</header>
<p class="small">Open in Chrome. Allow microphone access. Test automatically evaluates Pronunciation, Speaking, Grammar, and Listening.</p>

<section id="pronunciation"><h2>Section 1 — Pronunciation</h2><ol></ol></section>
<section id="speaking"><h2>Section 2 — Speaking / Fluency</h2><div></div></section>
<section id="grammar"><h2>Section 3 — Grammar</h2><div id="mcqcontainer"></div></section>
<section id="listening"></section>

<section>
<h2>Submit & Score</h2>
<button onclick="showScore()">Evaluate & Show Score</button>
<div id="finalscore" class="small"></div>
<button onclick="nextTest()">Next Test ➡️</button>
</section>

<script>
/* ------------------ DATA: 10 SETS ------------------ */
const pronSets = [
  ["The entrepreneur launched an innovative solution to a global problem.","Effective communication requires both clarity and confidence.","The temperature fluctuates dramatically in this region.","The architecture of this building is truly magnificent.","Please schedule the presentation for Wednesday afternoon."],
  ["Technology is evolving faster than ever before.","Global warming affects every continent on Earth.","Teamwork and dedication lead to success.","Artificial intelligence is transforming industries.","A balanced diet is essential for a healthy life."],
  ["Time management is crucial for productivity.","Reading books broadens knowledge.","Exercise helps maintain physical and mental health.","Traveling teaches us about diverse cultures.","Learning new languages enhances cognitive skills."],
  ["Digital marketing is a growing field.","Remote work has changed the corporate landscape.","Cloud computing provides scalable solutions.","Data privacy is a major concern today.","Innovation drives competitive advantage in business."],
  ["Sustainable energy is the need of the hour.","Volunteering builds empathy and community.","Public speaking boosts confidence and communication.","Healthy habits lead to long-term wellness.","Team collaboration increases efficiency in projects."],
  ["Leadership involves guiding and motivating others.","Problem-solving skills are highly valued.","Effective meetings save time and resources.","Mindfulness improves focus and reduces stress.","Networking helps career development."],
  ["Artificial intelligence can automate tasks.","Cybersecurity protects sensitive information.","E-learning platforms are revolutionizing education.","Social media influences public opinion.","Project planning ensures timely delivery."],
  ["Entrepreneurship requires risk-taking and innovation.","Emotional intelligence is important for leaders.","Critical thinking aids decision-making.","Cultural awareness improves workplace harmony.","Customer satisfaction is key to business success."],
  ["Healthy eating enhances performance.","Time-bound goals improve productivity.","Innovation fosters competitive edge.","Continuous learning keeps professionals relevant.","Effective teamwork leads to better results."],
  ["Sustainability impacts long-term growth.","Digital transformation drives efficiency.","Feedback helps personal and professional growth.","Public relations shape organizational image.","Negotiation skills are vital in business."]
];

const speakSets = [
  ["Describe your favorite hobby and explain why you enjoy it.","Talk about a challenging project or task you’ve completed recently."],
  ["Describe a memorable trip you have taken.","Explain a skill you would like to learn and why."],
  ["Discuss a book that influenced your life.","Share an experience where you helped someone."],
  ["Talk about a recent technological innovation.","Describe a leadership experience you had."],
  ["Explain a personal achievement you are proud of.","Talk about a team activity you enjoyed."],
  ["Discuss a problem you solved creatively.","Describe a professional goal you aim to achieve."],
  ["Share your thoughts on digital transformation.","Describe a hobby you would like to try."],
  ["Talk about an ethical dilemma you faced.","Describe your ideal workplace."],
  ["Explain a time you managed stress effectively.","Share an experience of learning a new skill."],
  ["Discuss a social issue important to you.","Describe a memorable event in your community."]
];

const grammarSets = [
  { questions:[{ q:"She ____ to the gym every morning.", opts:["go","goes","gone"], ans:"goes" },
               { q:"If I ____ you, I would take the offer.", opts:["was","were","am"], ans:"were" },
               { q:"He hasn’t finished the report, ____?", opts:["has he","hasn't he","did he"], ans:"has he" },
               { q:"The manager asked whether the meeting ____ scheduled.", opts:["is","was","will"], ans:"was" },
               { q:"Neither of the students ____ absent today.", opts:["was","were","are"], ans:"was" }]},
  { questions:[{ q:"They ____ playing football yesterday.", opts:["are","were","was"], ans:"were" },
               { q:"By next month, we ____ our exams.", opts:["finish","will finish","will have finished"], ans:"will have finished" },
               { q:"She didn't come, ____?", opts:["did she","does she","didn't she"], ans:"did she" },
               { q:"The book ____ by my friend.", opts:["was written","written","is writing"], ans:"was written" },
               { q:"I have lived here ____ 2018.", opts:["for","since","from"], ans:"since" }]},
  { questions:[{ q:"He always ____ his homework on time.", opts:["do","does","did"], ans:"does" },
               { q:"If I ____ rich, I would travel the world.", opts:["am","were","was"], ans:"were" },
               { q:"You must ____ your assignments.", opts:["finish","finished","finishing"], ans:"finish" },
               { q:"The train ____ at 9 PM.", opts:["arrive","arrives","arrived"], ans:"arrives" },
               { q:"I have ____ a new language.", opts:["learn","learned","learning"], ans:"learned" }]},
  { questions:[{ q:"She ____ the piano beautifully.", opts:["play","plays","played"], ans:"plays" },
               { q:"They ____ already left.", opts:["has","have","had"], ans:"have" },
               { q:"We ____ dinner when he arrived.", opts:["were having","have","had"], ans:"were having" },
               { q:"If it ____ tomorrow, we will stay home.", opts:["rains","rain","rained"], ans:"rains" },
               { q:"I ____ never seen this movie.", opts:["have","has","had"], ans:"have" }]},
  { questions:[{ q:"He ____ to school every day.", opts:["walk","walks","walking"], ans:"walks" },
               { q:"By next year, I ____ my degree.", opts:["will complete","complete","completed"], ans:"will complete" },
               { q:"She ____ not like coffee.", opts:["does","do","did"], ans:"does" },
               { q:"The movie ____ interesting.", opts:["is","are","was"], ans:"is" },
               { q:"They ____ been friends for years.", opts:["has","have","had"], ans:"have" }]},
  { questions:[{ q:"If I ____ earlier, I wouldn't have missed the bus.", opts:["leave","left","had left"], ans:"had left" },
               { q:"She ____ in London.", opts:["live","lives","lived"], ans:"lives" },
               { q:"He ____ his work carefully.", opts:["do","does","did"], ans:"does" },
               { q:"We ____ dinner at 8 PM yesterday.", opts:["have","had","has"], ans:"had" },
               { q:"I ____ my keys yesterday.", opts:["lose","lost","loses"], ans:"lost" }]},
  { questions:[{ q:"They ____ to Paris last summer.", opts:["go","went","gone"], ans:"went" },
               { q:"She ____ English very well.", opts:["speaks","speak","spoke"], ans:"speaks" },
               { q:"I ____ breakfast every morning.", opts:["eat","ate","eaten"], ans:"eat" },
               { q:"By 2025, we ____ completed the project.", opts:["will have","will","have"], ans:"will have" },
               { q:"He ____ like pizza.", opts:["do","does","did"], ans:"does" }]},
  { questions:[{ q:"She ____ happy with her results.", opts:["is","are","was"], ans:"is" },
               { q:"They ____ playing tennis now.", opts:["are","is","were"], ans:"are" },
               { q:"I ____ seen this before.", opts:["have","has","had"], ans:"have" },
               { q:"If it ____ rain, we will stay home.", opts:["does","did","do"], ans:"does" },
               { q:"He ____ to school yesterday.", opts:["go","went","gone"], ans:"went" }]},
  { questions:[{ q:"I ____ not know the answer.", opts:["do","does","did"], ans:"do" },
               { q:"She ____ reading a book.", opts:["is","are","was"], ans:"is" },
               { q:"We ____ been waiting for an hour.", opts:["have","has","had"], ans:"have" },
               { q:"They ____ like ice cream.", opts:["does","do","did"], ans:"do" },
               { q:"He ____ gone to the market.", opts:["has","have","had"], ans:"has" }]},
  { questions:[{ q:"By next week, I ____ finished my work.", opts:["will have","will","have"], ans:"will have" },
               { q:"She ____ happy to help.", opts:["is","are","was"], ans:"is" },
               { q:"I ____ never eaten sushi.", opts:["have","has","had"], ans:"have" },
               { q:"They ____ going to the park.", opts:["are","is","was"], ans:"are" },
               { q:"He ____ like to swim.", opts:["does","do","did"], ans:"does" }]}
];

const listeningSets = [
  { passage:"A company decided to change its remote work policy due to decreasing productivity. Employees were asked to return to the office three days a week. The management hopes this will increase collaboration and communication among teams.",
    qs:[{id:"L1Q1",text:"Why did the company change its policy?",ans:"productivity"},
        {id:"L1Q2",text:"How many days are employees expected to come to the office?",ans:"three"},
        {id:"L1Q3",text:"What improvement does management expect?",ans:"collaboration"}]},
  { passage:"The city introduced electric buses to reduce pollution. Passengers found them quieter and more comfortable than regular buses. The government plans to expand the service next year.",
    qs:[{id:"L2Q1",text:"Why were electric buses introduced?",ans:"pollution"},
        {id:"L2Q2",text:"How did passengers find them?",ans:"comfortable"},
        {id:"L2Q3",text:"What will the government do next year?",ans:"expand"}]},
  { passage:"The university organized a seminar on renewable energy. Students and faculty attended and learned about solar and wind energy applications.",
    qs:[{id:"L3Q1",text:"What was the topic of the seminar?",ans:"renewable energy"},
        {id:"L3Q2",text:"Who attended the seminar?",ans:"students"},
        {id:"L3Q3",text:"Which energy types were discussed?",ans:"solar"}]},
  { passage:"A bakery launched a new line of organic bread. Customers appreciated the quality, and sales increased over the next month.",
    qs:[{id:"L4Q1",text:"What product was launched?",ans:"bread"},
        {id:"L4Q2",text:"What type of bread was it?",ans:"organic"},
        {id:"L4Q3",text:"What happened to sales?",ans:"increased"}]},
  { passage:"The local government started a campaign to reduce plastic use. Citizens were encouraged to bring reusable bags and containers.",
    qs:[{id:"L5Q1",text:"What was the campaign about?",ans:"plastic"},
        {id:"L5Q2",text:"What were citizens encouraged to bring?",ans:"reusable"},
        {id:"L5Q3",text:"Who started the campaign?",ans:"government"}]},
  { passage:"A tech company introduced a new smartphone with advanced camera features. The phone received positive reviews online.",
    qs:[{id:"L6Q1",text:"What product was introduced?",ans:"smartphone"},
        {id:"L6Q2",text:"What was special about it?",ans:"camera"},
        {id:"L6Q3",text:"How was it received?",ans:"positive"}]},
  { passage:"The hospital organized a health camp for free check-ups. Many people attended and benefited from medical consultations.",
    qs:[{id:"L7Q1",text:"What kind of camp was organized?",ans:"health"},
        {id:"L7Q2",text:"Was it free?",ans:"free"},
        {id:"L7Q3",text:"Who benefited?",ans:"people"}]},
  { passage:"The city library added new books in various languages. Readers enjoyed the collection and borrowed many books.",
    qs:[{id:"L8Q1",text:"What did the library add?",ans:"books"},
        {id:"L8Q2",text:"Were the books in one language?",ans:"no"},
        {id:"L8Q3",text:"Who enjoyed the collection?",ans:"readers"}]},
  { passage:"A restaurant started offering vegan options on their menu. Customers appreciated the initiative and ordered more frequently.",
    qs:[{id:"L9Q1",text:"What new options were offered?",ans:"vegan"},
        {id:"L9Q2",text:"Where were these options added?",ans:"menu"},
        {id:"L9Q3",text:"How did customers respond?",ans:"appreciated"}]},
  { passage:"The company provided online training for employees to enhance skills. Participation was high, and feedback was positive.",
    qs:[{id:"L10Q1",text:"What was provided to employees?",ans:"training"},
        {id:"L10Q2",text:"Was it offline or online?",ans:"online"},
        {id:"L10Q3",text:"What was the feedback?",ans:"positive"}]}
];

/* ------------------ UTIL ------------------ */
function shuffleArray(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]} return a}

/* ------------------ STATE ------------------ */
let usedSets=[];
let currentSet={pron:0,speak:0,grammar:0,listening:0};
let speakMR=[],speakChunks=[],timers=[];
let mediaRecorderArr=[],recordedChunks=[];
let currentGrammarQuestions=[];

/* ------------------ LOAD SET ------------------ */
function loadSet(i){
  currentSet={pron:i,speak:i,grammar:i,listening:i};
  renderPronunciation(); renderSpeaking(); renderGrammar(); renderListening();
  document.getElementById("finalscore").innerText="";
}

/* ------------------ PRON ------------------ */
function renderPronunciation(){
  const section=document.querySelector("#pronunciation ol"); section.innerHTML="";
  const sentences=shuffleArray([...pronSets[currentSet.pron]]);
  sentences.forEach((t,i)=>{
    const li=document.createElement("li");
    li.innerHTML=`"${t}" <div class="controls">
      <button onclick="speakText(${i})">Play</button>
      <button onclick="startRec(${i})">Record</button>
      <button onclick="stopRec(${i})">Stop</button>
    </div>`;
    section.appendChild(li);
  });
}
function speakText(i){
  const ut=new SpeechSynthesisUtterance(pronSets[currentSet.pron][i]);
  ut.rate=0.95; window.speechSynthesis.cancel(); window.speechSynthesis.speak(ut);
}
async function startRec(i){
  const stream=await navigator.mediaDevices.getUserMedia({audio:true});
  const mr=new MediaRecorder(stream); mediaRecorderArr[i]=mr; recordedChunks[i]=[];
  mr.ondataavailable=e=>{if(e.data.size>0)recordedChunks[i].push(e.data)};
  mr.onstop=()=>{
    const blob=new Blob(recordedChunks[i],{type:'audio/webm'});
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a'); a.href=url; a.download='pron_'+i+'.webm'; a.innerText='Download recording';
    document.querySelector("#pronunciation").appendChild(a);
  };
  mr.start();
}
function stopRec(i){if(mediaRecorderArr[i])mediaRecorderArr[i].stop();}

/* ------------------ SPEAKING ------------------ */
function renderSpeaking(){
  const container=document.querySelector("#speaking div"); container.innerHTML="";
  const prompts=shuffleArray([...speakSets[currentSet.speak]]);
  prompts.forEach((prompt,i)=>{
    const div=document.createElement("div");
    div.innerHTML=`<p><strong>Prompt ${String.fromCharCode(65+i)}:</strong> ${prompt}</p>
      <div class="controls">
        <button onclick="startSpeakRec(${i})">Record</button>
        <button onclick="stopSpeakRec(${i})">Stop</button>
        <span id="timer${i}" class="small"></span>
      </div>
      <div id="speaklink${i}"></div><hr>`;
    container.appendChild(div);
  });
}
function startSpeakRec(i){
  navigator.mediaDevices.getUserMedia({audio:true}).then(stream=>{
    const mr=new MediaRecorder(stream); speakMR[i]=mr; speakChunks[i]=[];
    mr.ondataavailable=e=>{if(e.data.size>0)speakChunks[i].push(e.data)};
    mr.onstop=()=>{
      const blob=new Blob(speakChunks[i],{type:'audio/webm'});
      const url=URL.createObjectURL(blob);
      const link=document.getElementById('speaklink'+i); link.innerHTML='';
      const a=document.createElement('a'); a.href=url; a.download='speaking_'+i; a.innerText='Download speaking '+(i+1); link.appendChild(a);
    };
    mr.start(); let sec=0; document.getElementById('timer'+i).innerText='(recording: 0s)';
    timers[i]=setInterval(()=>{ sec++; document.getElementById('timer'+i).innerText='(recording: '+sec+'s)'; if(sec>=120)stopSpeakRec(i); },1000);
  });
}
function stopSpeakRec(i){if(speakMR[i])speakMR[i].stop(); clearInterval(timers[i]); document.getElementById('timer'+i).innerText='';}

/* ------------------ GRAMMAR ------------------ */
function renderGrammar(){
  const container=document.getElementById("mcqcontainer"); container.innerHTML="";
  currentGrammarQuestions=shuffleArray([...grammarSets[currentSet.grammar].questions]);
  currentGrammarQuestions.forEach((q,idx)=>{
    const div=document.createElement("div"); div.className="mcq";
    div.innerHTML=`${idx+1}. ${q.q}<br>`+q.opts.map(opt=>`<label><input type="radio" name="q${idx+1}" value="${opt}"> ${opt}</label>`).join(" ");
    container.appendChild(div);
  });
  const btn=document.createElement("div"); btn.style.marginTop="10px";
  btn.innerHTML=`<button onclick="checkMCQ()">Check Grammar</button> <span id="mcqscore" class="small"></span>`;
  container.appendChild(btn);
}
function checkMCQ(){
  let score=0;
  currentGrammarQuestions.forEach((q,idx)=>{
    const val=document.querySelector(`input[name="q${idx+1}"]:checked`)?.value;
    const divs=document.querySelectorAll("#mcqcontainer .mcq")[idx];
    divs.querySelectorAll(".correct, .wrong").forEach(el=>el.remove());
    if(val===q.ans){score++; divs.innerHTML+=` <span class="correct">Correct</span>`;}
    else{divs.innerHTML+=` <span class="wrong">Wrong, Answer: ${q.ans}</span>`;}
  });
  document.getElementById("mcqscore").innerText="Score: "+score+"/"+currentGrammarQuestions.length;
  return score;
}

/* ------------------ LISTENING ------------------ */
function renderListening(){
  const section=document.getElementById("listening");
  const lset=listeningSets[currentSet.listening];
  const questions=shuffleArray([...lset.qs]);
  section.innerHTML=`<h2>Section 4 — Listening</h2>
    <button onclick="speakTextPassage()">Play Passage</button>
    <p class="small">${lset.passage}</p>
    <ol>${questions.map(q=>`<li>${q.text} <input id="${q.id}"></li>`).join("")}</ol>
    <div style="margin-top:10px"><button onclick="checkListening()">Check Listening</button> <span id="lsresult" class="small"></span></div>`;
}
function speakTextPassage(){
  const ut=new SpeechSynthesisUtterance(listeningSets[currentSet.listening].passage);
  ut.rate=0.95; window.speechSynthesis.cancel(); window.speechSynthesis.speak(ut);
}
function checkListening(){
  const lset=listeningSets[currentSet.listening]; let c=0;
  lset.qs.forEach(q=>{
    const val=document.getElementById(q.id).value.toLowerCase();
    const inputEl=document.getElementById(q.id);
    inputEl.nextElementSibling?.remove();
    const span=document.createElement("span");
    span.className="small";
    if(val.includes(q.ans)){c++; span.style.color="green"; span.innerText=" Correct";}
    else{span.style.color="red"; span.innerText=` Answer: ${q.ans}`;}
    inputEl.after(span);
  });
  document.getElementById("lsresult").innerText="Listening: "+c+"/"+lset.qs.length;
  return c;
}

/* ------------------ SCORE ------------------ */
function showScore(){
  const pronScore=Math.min(10,recordedChunks.filter(ch=>ch.length>0).length*2);
  const speakScore=Math.min(15,speakChunks.filter(ch=>ch.length>0).length*7);
  const g=checkMCQ();
  const l=checkListening();
  const grammarScore=Math.round((g/currentGrammarQuestions.length)*15);
  const listeningScore=Math.round((l/listeningSets[currentSet.listening].qs.length)*20);
  const total=pronScore+speakScore+grammarScore+listeningScore;
  document.getElementById("finalscore").innerText=`Scores:\nPronunciation: ${pronScore}/10\nSpeaking: ${speakScore}/15\nGrammar: ${grammarScore}/15\nListening: ${listeningScore}/20\nTotal: ${total}/60`;
}

/* ------------------ NEXT TEST ------------------ */
function nextTest(){
  usedSets.push(currentSet.pron);
  let availableSets = pronSets.map((_,i)=>i).filter(i=>!usedSets.includes(i));
  if(availableSets.length===0){ alert("All sets completed. Restarting."); usedSets=[]; availableSets=pronSets.map((_,i)=>i);}
  const nextIndex=availableSets[Math.floor(Math.random()*availableSets.length)];
  loadSet(nextIndex);
}

/* ------------------ INIT ------------------ */
window.onload=()=>loadSet(0);
</script>
</body>
</html>
